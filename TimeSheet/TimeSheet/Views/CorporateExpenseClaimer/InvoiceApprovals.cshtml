@model IEnumerable<TimeSheet.Models.ImportInvoiceDataModel>
@{
    ViewBag.Title = "InvoiceApprovals";
}

<script src="~/Scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
<link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src=" https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.css" rel="stylesheet" />
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.print.css" rel="stylesheet" media="print" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://unpkg.com/balloon-css/balloon.min.css">
<div class="col-md-12">
    <div class="pull-right">
        @using (Html.BeginForm("ImportInvoices", "CorporateExpenseClaimer", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()

            <div class="well pull-right" style="margin-bottom:5px; margin-top:5px; padding:5px">
                <input type="file" name="file" id="file" value="ImportExcelAssets" data-val-required="Please Choose a Assets File.." />
                <input type="Submit" value="IMPORT" class="btn btn-sm btn-warning pull-right" id="Submit" />
                <div style="margin-top:10px">
                    <a href="~/InvoiceExcelFiles/GeneralInvoiceApporovalImporter.xlsx"><u style="color:blue;font-weight:400;font-size:smaller"> Download Sample Template</u></a>
                </div>
            </div>
        }       
         <table id="InvoicesTable" class="table table-bordered table-hover table-sm table-responsive" style="font-size:small; font-weight:600">
                <thead style="background-color:orange; color: white">
                    <tr>
                        @*<th>Id</th>*@
                        <th>Invoice_Date</th>
                        <th>InvoiceNumber</th>
                        <th>InvoiceAmount_ex_gst</th>
                        <th>ReceivedInvoiceDate</th>
                        <th>Status</th>
                        <th>Invoice_Description</th>
                        <th>Approver</th>
                        <th>Line</th>
                        <th>SupplierName</th>
                        <th>Project_Job</th>
                        <th>PM_Warehouse_HO</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                    <tr>

                        @*<td>  @Html.DisplayFor(modelItem => item.Id)</td>*@
                        <td>  @Html.DisplayFor(modelItem => item.Invoice_Date)</td>
                        <td>  @Html.DisplayFor(modelItem => item.InvoiceNumber)</td>
                        <td>  @Html.DisplayFor(modelItem => item.InvoiceAmount_ex_gst)</td>
                        <td>  @Html.DisplayFor(modelItem => item.Invoice_Description)</td>
                        <td>  @Html.DisplayFor(modelItem => item.ReceivedInvoiceDate)</td>
                        <td>  @Html.DisplayFor(modelItem => item.InvoiceStatus)</td>
                        <td>  @Html.DisplayFor(modelItem => item.Approver)</td>
                        <td>  @Html.DisplayFor(modelItem => item.Line)</td>
                        <td>  @Html.DisplayFor(modelItem => item.SupplierName)</td>
                        <td>  @Html.DisplayFor(modelItem => item.Project_Job)</td>
                        <td>  @Html.DisplayFor(modelItem => item.PM_Warehouse_HO)</td>
                        <td style="text-align:center">
                            @if (item.InvoiceStatus.Contains("Requested"))
                            {
                                using (Html.BeginForm("ApproveInvoice", "CorporateExpenseClaimer", new { InvoiceId = item.Id }, FormMethod.Post))
                                {
                                   <button type="submit" class="btn btn-success btn-sm">APPROVE</button>
                                }
                            }
                        </td>
                    </tr>
                    }
                </tbody>
            </table>          
     
    </div>
</div>
<script>
    $(document).ready(function () {

        $('#InvoicesTable').dataTable({
            responsive: true,
            stateSave: true,
            "lengthMenu": [10,15,20, 30, 50, 100],
            "pageLength": 10
        });
        $('.dataTables_filter').addClass('pull-right');
    });
</script>